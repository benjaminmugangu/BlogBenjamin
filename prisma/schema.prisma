// // This is your Prisma schema file,
// // learn more about it in the docs: https://pris.ly/d/prisma-schema

// // Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// // Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// generator client {
//   provider = "prisma-client-js"
// }


// datasource db {
//   provider = "postgresql"
//   url      = env("DATABASE_URL")
//   directUrl = env("DIRECT_URL")
// }


// model User {
//   id          String      @id 
//   email       String   @unique
//   firstname   String
// *You seem to be using an outdated version of Cursor. Please upgrade to the latest version by [downloading Cursor again from our website](https://www.cursor.com/). All your settings will be preserved.*
//   profileImage String?
//   posts       Post[]   // relation
//   createdAt   DateTime @default(now())
//   updatedAt   DateTime @updatedAt
//   deletedAt   DateTime?

//   Site       Site[];
// }

// model Post {
//   id        Int      @id @default(autoincrement())
//   title     String
//   content   String?
//   author    User     @relation(fields: [authorId], references: [id])
//   authorId  String
//   createdAt DateTime @default(now())
// }

// model Site {
//   id        String      @id @default(uuid())
//   name      String
//   description String
//   subdirectory String @unique
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   deletedAt DateTime?

//   imageUrl String?
//   user     User?     @relation(fields: [userId], references: [id])
//   userId   String?
// }


generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id           String   @id 
  email        String   @unique
  firstname    String
  lastname     String
  profileImage String?
  posts        Post[]
  sites        Site[]   // relation avec les sites
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  deletedAt    DateTime?
}

model Post {
  id               String   @id @default(uuid())
  title            String
  articleContent   Json
  smallDescription String
  image            String
  slug             String   @unique
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  deletedAt        DateTime?

  site   Site @relation(fields: [siteId], references: [id], onDelete: Cascade)
  siteId String

  user   User @relation(fields: [userId], references: [id])
  userId String
}

model Site {
  id          String   @id @default(uuid())
  name        String
  description String
  subdirectory String  @unique
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  deletedAt   DateTime?

  imageUrl    String?
  user        User     @relation(fields: [userId], references: [id])
  userId      String   // obligatoire maintenant

  posts       Post[]
}



